(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ytbf:function(e,t,i){"use strict";i.r(t),i.d(t,"FileDataModule",(function(){return k}));var a=i("ofXK"),o=i("tyNb"),r=i("0IaG"),c=i("3Pt+"),n=i("SXVO"),s=i("zViY"),l=i("fXoL"),d=i("6xPc"),f=i("jKJn"),m=i("XOzN"),u=i("dzPw"),g=i("kmnG"),h=i("d3UM"),p=i("bTqV"),b=i("FKr1");function y(e,t){if(1&e&&(l.fc(0,"mat-option",11),l.Yc(1),l.ec()),2&e){const e=t.$implicit;l.Ac("value",e.categoryName),l.Nb(1),l.ad(" ",e.categoryName," ")}}function S(e,t){1&e&&(l.fc(0,"span",13),l.Yc(1," File Category is required "),l.ec())}function C(e,t){1&e&&(l.fc(0,"span",13),l.Yc(1," length exceeded "),l.ec())}function v(e,t){if(1&e&&(l.fc(0,"mat-error"),l.Wc(1,S,2,0,"span",12),l.Wc(2,C,2,0,"span",12),l.ec()),2&e){const e=l.sc();l.Nb(1),l.Ac("ngIf",e.eform.fileCategory.errors.required),l.Nb(1),l.Ac("ngIf",e.eform.fileCategory.errors.maxlength)}}function w(e,t){1&e&&(l.fc(0,"span",13),l.Yc(1," Please choose a file "),l.ec())}function N(e,t){if(1&e&&(l.fc(0,"span"),l.Wc(1,w,2,0,"span",12),l.ec()),2&e){const e=l.sc();l.Nb(1),l.Ac("ngIf",e.eform.fileContent.errors.required)}}let D=(()=>{class e{constructor(e,t,i,a,o,r,c){this.dialogRef=e,this.row=t,this.manageGridService=i,this.alertService=a,this.headerService=o,this.formBuilder=r,this.adminBaseService=c,this.fileCategoryList=[]}ngOnInit(){this.fileDataForm=this.formBuilder.group({fileName:[this.row.data?this.row.data.fileName:""],fileCategory:[!!this.row.data&&this.row.data.fileCategory,[c.x.required,c.x.maxLength(50)]],fileContent:[this.row.data?this.row.data.fileContent:""],fileId:[this.row.data?this.row.data.fileId:""]}),null==this.row.data&&this.fileDataForm.get("fileContent").setValidators([c.x.required]),this.headerService.toggleSpinner(!0),this.adminBaseService.requestSubmit("ADM_LIST_FILE_CATEGORY",null).subscribe(e=>{e&&(e.result&&"SUCCESS"===e.result.status&&(this.fileCategoryList=e.result.data),this.headerService.toggleSpinner(!1))},e=>{this.headerService.toggleSpinner(!1)})}get eform(){return this.fileDataForm.controls}onSubmit(){const e=this.row.data?"Edit":"New";if(this.fileDataForm.invalid)return!1;this.manageGridService.addORupdateRowData(s.a.fileData.key,!this.row.data,this.fileDataForm.value).subscribe(t=>{t&&t.result&&"SUCCESS"===t.result.status&&(this.dialogRef.close({action:e,rowValue:t.result.data}),this.alertService.open(n.a.SUCCESS,`${s.a.fileData.name} ${this.row.data?"edited":"created"} successfully`))},e=>{})}handleFileSelect(e){const t=e.target.files,i=t[0];if(t&&i){this.fileDataForm.get("fileName").setValue(i.name);const e=new FileReader;e.onload=this._handleReaderLoaded.bind(this),e.readAsBinaryString(i)}}_handleReaderLoaded(e){btoa(e.target.result),this.fileDataForm.get("fileContent").setValue(btoa(e.target.result))}get moduleKeyModel(){return s.a}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(r.g),l.Zb(r.a),l.Zb(d.a),l.Zb(f.a),l.Zb(m.a),l.Zb(c.d),l.Zb(u.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-file-data-grid-action"]],decls:18,vars:7,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[2,"height","200px"],[1,"full-width"],["formControlName","fileCategory","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["type","file","accept",".png, .jpg, .jpeg, .pdf",3,"change"],["mat-dialog-actions",""],["type","submit","mat-raised-button","","color","primary"],["mat-raised-button","","color","warn","cdkFocusInitial","",3,"mat-dialog-close"],[3,"value"],["class","alert-danger",4,"ngIf"],[1,"alert-danger"]],template:function(e,t){1&e&&(l.fc(0,"form",0),l.oc("ngSubmit",(function(){return t.onSubmit()})),l.fc(1,"h1",1),l.Yc(2),l.ec(),l.fc(3,"mat-dialog-content",2),l.fc(4,"mat-form-field",3),l.fc(5,"mat-label"),l.Yc(6,"Choose File Category"),l.ec(),l.fc(7,"mat-select",4),l.Wc(8,y,2,2,"mat-option",5),l.ec(),l.Wc(9,v,3,2,"mat-error",6),l.ec(),l.fc(10,"input",7),l.oc("change",(function(e){return t.handleFileSelect(e)})),l.ec(),l.ac(11,"br"),l.Wc(12,N,2,1,"span",6),l.ec(),l.fc(13,"div",8),l.fc(14,"button",9),l.Yc(15,"Submit"),l.ec(),l.fc(16,"button",10),l.Yc(17,"Cancel"),l.ec(),l.ec(),l.ec()),2&e&&(l.Ac("formGroup",t.fileDataForm),l.Nb(2),l.bd("",t.row.data?"Edit":"Add","\xa0",t.moduleKeyModel.fileData.name,""),l.Nb(6),l.Ac("ngForOf",t.fileCategoryList),l.Nb(1),l.Ac("ngIf",t.eform.fileCategory.invalid&&(t.eform.fileCategory.dirty||t.eform.fileCategory.touched)),l.Nb(3),l.Ac("ngIf",t.eform.fileContent.invalid&&(t.eform.fileContent.dirty||t.eform.fileContent.touched)),l.Nb(4),l.Ac("mat-dialog-close","NO"))},directives:[c.z,c.p,c.h,r.h,r.e,g.c,g.g,h.a,c.o,c.g,c.v,a.k,a.l,r.c,p.a,r.d,b.m,g.b],styles:[""]}),e})();var F=i("YgTD");let I=(()=>{class e{constructor(e,t,i){this.dialogRef=e,this.row=t,this.roleService=i}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(r.g),l.Zb(r.a),l.Zb(F.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-file-data-details"]],decls:15,vars:5,consts:[["mat-dialog-title","",1,"title"],[2,"width","50px",3,"src"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(l.fc(0,"h1",0),l.Yc(1,"Details"),l.ec(),l.fc(2,"mat-dialog-content"),l.fc(3,"p"),l.Yc(4,"Icon Preview"),l.ec(),l.ac(5,"img",1),l.fc(6,"p"),l.Yc(7),l.ec(),l.fc(8,"p"),l.Yc(9),l.ec(),l.fc(10,"p"),l.Yc(11),l.ec(),l.ec(),l.fc(12,"div",2),l.fc(13,"button",3),l.Yc(14,"Close"),l.ec(),l.ec()),2&e&&(l.Nb(5),l.Ac("src",t.row.data.fileURL,l.Pc),l.Nb(2),l.ad("File Name:",t.row.data.fileName,""),l.Nb(2),l.ad("File Icon CSS:",t.row.data.fileIconCss,""),l.Nb(2),l.ad("File Category:",t.row.data.fileCategory,""),l.Nb(2),l.Ac("mat-dialog-close","NO"))},directives:[r.h,r.e,r.c,p.a,r.d],styles:[""]}),e})(),Y=(()=>{class e{constructor(e,t,i,a){this.dialogRef=e,this.row=t,this.manageGridService=i,this.alertService=a}ngOnInit(){}deleteRowData(){this.row&&this.manageGridService.deleteRowData(s.a.fileData.key,{fileId:this.row.data.fileId}).subscribe(e=>{e&&e.result&&"SUCCESS"===e.result.status&&(this.dialogRef.close({action:"Delete"}),this.alertService.open(n.a.SUCCESS,e.result.data))},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(r.g),l.Zb(r.a),l.Zb(d.a),l.Zb(f.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-file-data-delete"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(l.fc(0,"h1",0),l.Yc(1,"Confirmation"),l.ec(),l.fc(2,"mat-dialog-content"),l.fc(3,"p"),l.Yc(4,"Do you want to delete?"),l.ec(),l.ec(),l.fc(5,"div",1),l.fc(6,"button",2),l.oc("click",(function(){return t.deleteRowData()})),l.Yc(7,"Yes"),l.ec(),l.fc(8,"button",3),l.Yc(9,"No"),l.ec(),l.ec()),2&e&&(l.Nb(8),l.Ac("mat-dialog-close","NO"))},directives:[r.h,r.e,r.c,p.a,r.d],styles:[""]}),e})();var T=i("zkoq");function A(e,t){if(1&e&&(l.fc(0,"mat-option",4),l.Yc(1),l.ec()),2&e){const e=t.$implicit;l.Ac("value",e.categoryName),l.Nb(1),l.ad("",e.categoryName," ")}}let O=(()=>{class e{constructor(e,t,i){this.headerService=e,this.adminBaseService=t,this.manageGridService=i,this.categoryList=[],this.subscriptions=[]}ngOnInit(){this.headerService.toggleSpinner(!0),this.subscriptions.push(this.adminBaseService.requestSubmit("ADM_LIST_FILE_CATEGORY",null).subscribe(e=>{e&&(e.result&&"SUCCESS"===e.result.status&&(this.categoryList=e.result.data),this.headerService.toggleSpinner(!1))},e=>{this.headerService.toggleSpinner(!1),console.log(e)}))}categorySelectionChange(e){e&&this.manageGridService.loadFilters$.next("fileCategory=="+e)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(m.a),l.Zb(u.a),l.Zb(d.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-file-data-filter"]],decls:8,vars:2,consts:[["cols","2","rowHeight","13:1"],["appearance","fill",1,"full-width-80"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(l.fc(0,"mat-grid-list",0),l.fc(1,"mat-grid-tile"),l.fc(2,"mat-form-field",1),l.fc(3,"mat-label"),l.Yc(4,"Choose File Category"),l.ec(),l.fc(5,"mat-select",2),l.oc("ngModelChange",(function(e){return t.selectedCategory=e}))("selectionChange",(function(e){return t.categorySelectionChange(e.value)})),l.Wc(6,A,2,2,"mat-option",3),l.ec(),l.ec(),l.ec(),l.ac(7,"mat-grid-tile"),l.ec()),2&e&&(l.Nb(5),l.Ac("ngModel",t.selectedCategory),l.Nb(1),l.Ac("ngForOf",t.categoryList))},directives:[T.a,T.c,g.c,g.g,h.a,c.o,c.r,a.k,b.m],styles:[""]}),e})();var P=i("VxG0"),R=i("R3N2");const Z=[{path:"list",component:(()=>{class e{constructor(e){this.permissionService=e,this.filterComponent=O,this.columns=[{prop:"fileName",name:"File Name"},{prop:"fileCategory",name:"File Category"}],this.actionButtons=[{type:"New",matTooltip:"New "+this.moduleKeyModel.fileData.name,matTooltipClass:"tooltip",matTooltipPosition:"above",color:"primary",matIcon:"add",dialogComponent:D,hasPermission:this.permissionService.hasPermission("New")},{type:"Info",matTooltip:this.moduleKeyModel.fileData.name+" info",matTooltipClass:"tooltip",matTooltipPosition:"above",color:"primary",matIcon:"info",dialogComponent:I,hasPermission:this.permissionService.hasPermission("View")},{type:"Edit",matTooltip:this.moduleKeyModel.fileData.name+" Edit",matTooltipClass:"tooltip",matTooltipPosition:"above",color:"primary",matIcon:"edit",dialogComponent:D,hasPermission:this.permissionService.hasPermission("Edit")},{type:"Delete",matTooltip:this.moduleKeyModel.fileData.name+" Delete",matTooltipClass:"tooltip",matTooltipPosition:"above",color:"warn",matIcon:"delete",dialogComponent:Y,hasPermission:this.permissionService.hasPermission("Delete")}]}ngOnInit(){}get moduleKeyModel(){return s.a}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(P.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-file-data-list"]],decls:1,vars:5,consts:[[3,"inSection","inColumns","inactionButtons","filterSction","moduleDisplayName"]],template:function(e,t){1&e&&l.ac(0,"app-manage-grid",0),2&e&&l.Ac("inSection",t.moduleKeyModel.fileData.key)("inColumns",t.columns)("inactionButtons",t.actionButtons)("filterSction",t.filterComponent)("moduleDisplayName",t.moduleKeyModel.fileData.name)},directives:[R.a],styles:[""]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=l.Xb({type:e}),e.\u0275inj=l.Wb({factory:function(t){return new(t||e)},imports:[[o.e.forChild(Z)],o.e]}),e})();var E=i("pKmL"),L=i("rsRi");let k=(()=>{class e{}return e.\u0275mod=l.Xb({type:e}),e.\u0275inj=l.Wb({factory:function(t){return new(t||e)},imports:[[a.c,M,E.a,L.a,c.j,c.u]]}),e})()}}]);